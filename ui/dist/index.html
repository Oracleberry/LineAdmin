<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE Admin App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>LINE Admin App</h1>
            <p class="subtitle">LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
        </header>

        <nav class="tabs">
            <button class="tab-button active" data-tab="dashboard">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button>
            <button class="tab-button" data-tab="users">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</button>
            <button class="tab-button" data-tab="messages">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´</button>
            <button class="tab-button" data-tab="scheduled">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é…ä¿¡</button>
            <button class="tab-button" data-tab="integrations">å¤–éƒ¨é€£æº</button>
            <button class="tab-button" data-tab="settings">è¨­å®š</button>
        </nav>

        <main>
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard-tab">
                <style>
                    .stats-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                        gap: 20px;
                        margin-bottom: 30px;
                    }

                    .stat-card {
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        padding: 25px;
                        border-radius: 12px;
                        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                    }

                    .stat-card h3 {
                        font-size: 0.9rem;
                        opacity: 0.9;
                        margin-bottom: 10px;
                    }

                    .stat-card .stat-value {
                        font-size: 2.5rem;
                        font-weight: bold;
                    }

                    .chart-container {
                        background: white;
                        padding: 25px;
                        border-radius: 12px;
                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                        margin-bottom: 20px;
                    }

                    .chart-container h3 {
                        margin-bottom: 20px;
                        color: #2d3748;
                    }

                    .bar-chart {
                        display: flex;
                        align-items: flex-end;
                        height: 200px;
                        gap: 10px;
                    }

                    .bar {
                        flex: 1;
                        background: linear-gradient(to top, #06C755, #05B34A);
                        border-radius: 4px 4px 0 0;
                        position: relative;
                        transition: all 0.3s;
                    }

                    .bar:hover {
                        opacity: 0.8;
                    }

                    .bar-label {
                        position: absolute;
                        bottom: -25px;
                        left: 50%;
                        transform: translateX(-50%);
                        font-size: 0.75rem;
                        color: #666;
                        white-space: nowrap;
                    }

                    .bar-value {
                        position: absolute;
                        top: -20px;
                        left: 50%;
                        transform: translateX(-50%);
                        font-size: 0.75rem;
                        font-weight: bold;
                        color: #2d3748;
                    }
                </style>

                <div class="section-header">
                    <h2>ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆ</h2>
                    <button class="btn btn-primary" onclick="loadDashboard()">ğŸ”„ æ›´æ–°</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</h3>
                        <div class="stat-value" id="total-users">-</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <h3>ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°</h3>
                        <div class="stat-value" id="total-messages">-</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <h3>ä»Šæ—¥ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
                        <div class="stat-value" id="messages-today">-</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <h3>ä»Šé€±ã®æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼</h3>
                        <div class="stat-value" id="new-users-week">-</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <h3>é…ä¿¡å¾…ã¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
                        <div class="stat-value" id="pending-messages">-</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
                        <h3>ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ</h3>
                        <div class="stat-value" id="upcoming-events">-</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—åˆ†å¸ƒ</h3>
                    <div id="message-types-chart" class="bar-chart">
                        <p style="text-align: center; color: #999;">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>æ™‚é–“åˆ¥ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ï¼ˆéå»7æ—¥é–“ï¼‰</h3>
                    <div id="hourly-activity-chart" class="bar-chart">
                        <p style="text-align: center; color: #999;">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                    </div>
                </div>
            </div>

            <!-- Users Tab -->
            <div class="tab-content" id="users-tab">
                <div class="section-header">
                    <h2>ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</h2>
                    <button class="btn btn-primary" onclick="loadUsers()">æ›´æ–°</button>
                </div>
                <div id="users-list" class="data-list">
                    <p class="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>

            <!-- Messages Tab -->
            <div class="tab-content" id="messages-tab">
                <div class="section-header">
                    <h2>å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´</h2>
                    <div class="controls">
                        <label>
                            è¡¨ç¤ºä»¶æ•°:
                            <select id="message-limit" onchange="loadMessages()">
                                <option value="50">50ä»¶</option>
                                <option value="100" selected>100ä»¶</option>
                                <option value="200">200ä»¶</option>
                            </select>
                        </label>
                        <button class="btn btn-primary" onclick="loadMessages()">æ›´æ–°</button>
                    </div>
                </div>
                <div id="messages-list" class="data-list">
                    <p class="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>

            <!-- Scheduled Messages Tab -->
            <div class="tab-content" id="scheduled-tab">
                <div class="section-header">
                    <h2>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é…ä¿¡ç®¡ç†</h2>
                </div>

                <div class="form-card">
                    <h3>æ–°è¦ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä½œæˆ</h3>
                    <form id="scheduled-form" onsubmit="createScheduledMessage(event)">
                        <div class="form-group">
                            <label>é…ä¿¡å…ˆ</label>
                            <select id="scheduled-user-id">
                                <option value="">å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆï¼‰</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹</label>
                            <textarea id="scheduled-text" required rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label>é…ä¿¡æ—¥æ™‚</label>
                            <input type="datetime-local" id="scheduled-time" required>
                        </div>
                        <button type="submit" class="btn btn-primary">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç™»éŒ²</button>
                    </form>
                </div>

                <div class="section-header">
                    <h3>ç™»éŒ²æ¸ˆã¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h3>
                    <button class="btn btn-secondary" onclick="loadScheduledMessages()">æ›´æ–°</button>
                </div>
                <div id="scheduled-list" class="data-list">
                    <p class="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>

            <!-- Integrations Tab -->
            <div class="tab-content" id="integrations-tab">
                <div class="section-header">
                    <h2>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº</h2>
                </div>

                <div class="form-card">
                    <h3>ğŸ—’ï¸ Notion</h3>
                    <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã‚’Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åŒæœŸ</p>
                    <button class="btn btn-primary" onclick="syncToNotion()">Notionã«åŒæœŸ</button>
                    <p class="note" style="margin-top: 10px;">â€» è¨­å®šã§Notion API Keyã‚’è¨­å®šã—ã¦ãã ã•ã„</p>
                </div>

                <div class="form-card">
                    <h3>ğŸ“Š Airtable</h3>
                    <p>ãƒ‡ãƒ¼ã‚¿ã‚’Airtableãƒ™ãƒ¼ã‚¹ã«è‡ªå‹•ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</p>
                    <button class="btn btn-primary" onclick="syncToAirtable()">Airtableã«åŒæœŸ</button>
                    <p class="note" style="margin-top: 10px;">â€» è¨­å®šã§Airtable API Keyã¨ãƒ™ ASID ã‚’è¨­å®šã—ã¦ãã ã•ã„</p>
                </div>

                <div class="form-card">
                    <h3>ğŸ“ˆ Google Sheets</h3>
                    <p>ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã¿</p>
                    <button class="btn btn-primary" onclick="syncToGoogleSheets()">Google Sheetsã«åŒæœŸ</button>
                    <p class="note" style="margin-top: 10px;">â€» è¨­å®šã§Googleèªè¨¼æƒ…å ±ã‚’è¨­å®šã—ã¦ãã ã•ã„</p>
                </div>

                <div class="info-card">
                    <h3>â„¹ï¸ å¤–éƒ¨é€£æºã«ã¤ã„ã¦</h3>
                    <p>ä¸Šè¨˜ã®æ©Ÿèƒ½ã¯ç¾åœ¨ã‚¹ã‚¿ãƒ–å®Ÿè£…ã§ã™ã€‚å„ã‚µãƒ¼ãƒ“ã‚¹ã®API Keyã‚’è¨­å®šã‚¿ãƒ–ã§è¨­å®šã™ã‚‹ã¨ã€å®Ÿéš›ã«ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings-tab">
                <div class="section-header">
                    <h2>ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</h2>
                </div>

                <div class="form-card">
                    <h3>LINEè¨­å®š</h3>
                    <form id="line-settings-form" onsubmit="saveLineSetting(event)">
                        <div class="form-group">
                            <label>LINE Channel Access Token</label>
                            <input type="password" id="line-channel-token" placeholder="LINE Bot ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³">
                        </div>
                        <div class="form-group">
                            <label>LINE Channel Secret</label>
                            <input type="password" id="line-channel-secret" placeholder="Webhook æ¤œè¨¼ç”¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ">
                        </div>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </form>
                </div>

                <div class="form-card">
                    <h3>é€šçŸ¥è¨­å®š</h3>
                    <form id="notification-settings-form" onsubmit="saveNotificationSettings(event)">
                        <div class="form-group">
                            <label>LINE Notify Token</label>
                            <input type="password" id="line-notify-token" placeholder="LINE Notify ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³">
                        </div>
                        <div class="form-group">
                            <label>Slack Webhook URL</label>
                            <input type="url" id="slack-webhook-url" placeholder="https://hooks.slack.com/services/...">
                        </div>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </form>
                </div>

                <div class="info-card">
                    <h3>Webhook URL</h3>
                    <p>ä»¥ä¸‹ã®URLã‚’LINE Developersã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¨­å®šã—ã¦ãã ã•ã„ï¼š</p>
                    <code id="webhook-url">http://your-server:3000/webhook/line</code>
                    <p class="note">â€» æœ¬ç•ªç’°å¢ƒã§ã¯HTTPSå¯¾å¿œã®URLï¼ˆngrokã‚„ã‚µãƒ¼ãƒãƒ¼ã®URLï¼‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„</p>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
